<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–¥–º–∏–Ω–∫–∞</title>
    <link rel="stylesheet" href="style1.css">
    
</head>
<body>

    <div class="login-container" id="loginContainer" style="display:none;">
        <form id="adminLoginForm">
            <h2>–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ</h2>
            <div class="form-group">
                <label for="admin-password">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="admin-password" required>
                <button type="button" id="togglePassword">üëÅÔ∏è</button> 
            </div>
            <button type="submit">–í–æ–π—Ç–∏</button>
        </form>
    </div>

    <div class="sidebar" id="sidebar" style="display:none;">
        <img src="free-icon-boy-4537069.png" alt="–õ–æ–≥–æ—Ç–∏–ø">
        <h2>–ê–¥–º–∏–Ω–∫–∞</h2>
        <a href="correct.html">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</a>
        <a href="mer.html">–ó–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</a> 
        <a id='logoutBtn' href="#">–í—ã—Ö–æ–¥</a> 
    </div>
    <section class="admin-panel" id="adminContent" style="display:none;">
        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
        
        <table id="userTable">
            <thead>
                <tr>
                    <th>–ò–º—è</th>
                    <th>Email</th>
                    <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                    <th>–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</th>
                    <th>–ü–∞—Ä–æ–ª—å</th> 
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                    <th>–ò–∑–≥–Ω–∞—Ç—å</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

 
         <div id="editModal">
             <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h3>
             <form id="editForm">
                 <input type="hidden" id="edit-index">
                 <div class="form-group">
                     <label for="edit-name">–ò–º—è:</label>
                     <input type="text" id="edit-name" required>
                 </div>

                 <div class="form-group">
                     <label for="edit-email">–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞:</label>
                     <input type="email" id="edit-email" required>
                 </div>

                 <div class="form-group">
                     <label for="edit-phone">–¢–µ–ª–µ—Ñ–æ–Ω:</label>
                     <input type="tel" id="edit-phone" required>
                 </div>

                 <div class="form-group">
                     <label for="edit-date">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è:</label>
                     <input type="date" id="edit-date" required>
                 </div>

           
                 <div class="form-group">
                     <label for="edit-password">–ü–∞—Ä–æ–ª—å:</label>
                     <input type='text' id='edit-password' required disabled>
                 </div>

                 <button type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                 <button type="button" onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
             </form>
         </div>

      
         <div id="deleteModal">
             <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
             <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è?</p>
             <button id='confirmDeleteBtn'>–î–∞, —É–¥–∞–ª–∏—Ç—å</button>
             <button onclick='closeDeleteModal()'>–û—Ç–º–µ–Ω–∞</button>
         </div>

    </section>


    <script>

const adminPassword = 'ewqewq'; 
if (!localStorage.getItem('admin')) {
    localStorage.setItem('admin', JSON.stringify({ password: adminPassword }));
}

if (sessionStorage.getItem('isAdminLoggedIn')) {
    document.getElementById('loginContainer').style.display = 'none';
    document.getElementById('sidebar').style.display = 'block';
    document.getElementById('adminContent').style.display = 'block';
    
    loadUsers(); 
} else {
    document.getElementById('loginContainer').style.display = 'flex';
}

document.getElementById('adminLoginForm').addEventListener('submit', function(event) {
    event.preventDefault(); 

     const password = document.getElementById('admin-password').value;

     const admin = JSON.parse(localStorage.getItem('admin'));

     if (password === admin.password) {
         sessionStorage.setItem('isAdminLoggedIn', 'true'); 
         document.getElementById('loginContainer').style.display = 'none';
         document.getElementById('sidebar').style.display = 'block';
         document.getElementById('adminContent').style.display = 'block';
         
         loadUsers();
     } else {
         alert("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å!");
     }
});

function loadUsers() {
    const users = JSON.parse(localStorage.getItem('users')) || [];
    const tbody = document.querySelector('#userTable tbody');
    tbody.innerHTML = ''; 

    users.forEach((user, index) => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${user.name}</td>
            <td>${user.email}</td>
            <td>${user.phone}</td>
            <td>${user.date}</td>
            <td>${user.password}</td> <!-- –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –ø–∞—Ä–æ–ª—å -->
            <td><button onclick='openEditModal(${index})'>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button></td>
            <td><button onclick='openDeleteModal(${index})'>–£–¥–∞–ª–∏—Ç—å</button></td>`;
          
       tbody.appendChild(row);
   });
}

function openEditModal(index) {
   const users = JSON.parse(localStorage.getItem('users')) || [];
   const user = users[index];

   document.getElementById('edit-index').value = index;
   document.getElementById('edit-name').value = user.name;
   document.getElementById('edit-email').value = user.email;
   document.getElementById('edit-phone').value = user.phone;
   document.getElementById('edit-date').value = user.date;

   document.getElementById('edit-password').value = user.password; 

   document.getElementById('editModal').style.display = 'block';
}

function closeModal() {
   document.getElementById('editModal').style.display = 'none';
}

document.getElementById('logoutBtn').addEventListener('click', function() {
   sessionStorage.removeItem('isAdminLoggedIn'); 
   window.location.reload(); 
});

function openDeleteModal(index) {
   const deleteModal = document.getElementById("deleteModal");
   deleteModal.style.display = "block";

  
   document.getElementById("confirmDeleteBtn").onclick = function() {
       deleteUser(index);
       closeDeleteModal();
   };
}

function closeDeleteModal() {
   document.getElementById("deleteModal").style.display = "none";
}

function deleteUser(index) {
   const users = JSON.parse(localStorage.getItem('users')) || [];
   
   users.splice(index, 1); 
   localStorage.setItem('users', JSON.stringify(users)); 
   loadUsers(); 
}

document.getElementById('editForm').addEventListener('submit', function(event) {
   event.preventDefault(); 

   const index = document.getElementById('edit-index').value;
   const users = JSON.parse(localStorage.getItem('users')) || [];

   users[index] = {
       name: document.getElementById('edit-name').value,
       email: document.getElementById('edit-email').value,
       phone: document.getElementById('edit-phone').value,
       date: document.getElementById('edit-date').value,
       password: users[index].password 
   };

   localStorage.setItem('users', JSON.stringify(users));
   closeModal();
   loadUsers(); 
});
    </script>

</body>
</html>